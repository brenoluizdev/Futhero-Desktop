{"version":3,"file":"index.cjs","sources":["../node_modules/electron-is-dev/index.js","../electron/main/index.ts"],"sourcesContent":["import electron from 'electron';\n\nif (typeof electron === 'string') {\n\tthrow new TypeError('Not running in an Electron environment!');\n}\n\nconst {env} = process; // eslint-disable-line n/prefer-global/process\nconst isEnvSet = 'ELECTRON_IS_DEV' in env;\nconst getFromEnv = Number.parseInt(env.ELECTRON_IS_DEV, 10) === 1;\n\nconst isDev = isEnvSet ? getFromEnv : !electron.app.isPackaged;\n\nexport default isDev;\n","import {\n  app,\n  BrowserWindow,\n  BrowserView,\n  ipcMain,\n  Menu,\n  dialog,\n} from \"electron\";\nimport pkg from \"electron-updater\";\nconst { autoUpdater } = pkg;\nimport path from \"path\";\nimport { fileURLToPath } from \"url\";\nimport isDev from \"electron-is-dev\";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n// Configurações de auto-update\nautoUpdater.checkForUpdatesAndNotify();\n\nlet mainWindow: BrowserWindow | null = null;\nlet currentGameView: BrowserView | null = null;\nlet currentGame: \"bonk\" | \"haxball\" | null = null;\n\nconst PRELOAD_PATH = path.join(__dirname, \"./preload/preload.js\");\nconst RENDERER_PATH = isDev\n  ? \"http://localhost:5173\"\n  : `file://${path.join(__dirname, \"../../dist/index.html\")}`;\n\n/**\n * Cria a janela principal do launcher\n */\nfunction createWindow() {\n  mainWindow = new BrowserWindow({\n    width: 1200,\n    height: 800,\n    minWidth: 800,\n    minHeight: 600,\n    webPreferences: {\n      preload: PRELOAD_PATH,\n      contextIsolation: true,\n      nodeIntegration: false,\n      sandbox: true,\n      webSecurity: true,\n    },\n    icon: path.join(__dirname, \"./assets/icon.ico\"),\n  });\n\n  if (isDev) {\n    mainWindow.webContents.openDevTools();\n    mainWindow.loadURL(RENDERER_PATH);\n  } else {\n    mainWindow.loadURL(RENDERER_PATH);\n  }\n\n  mainWindow.on(\"closed\", () => {\n    if (currentGameView && mainWindow) {\n      mainWindow.removeBrowserView(currentGameView);\n      currentGameView = null;\n    }\n    mainWindow = null;\n  });\n\n  // Criar menu da aplicação\n  createApplicationMenu();\n}\n\n/**\n * Cria o menu da aplicação\n */\nfunction createApplicationMenu() {\n  const template: any[] = [\n    {\n      label: \"Arquivo\",\n      submenu: [\n        {\n          label: \"Sair\",\n          accelerator: \"CmdOrCtrl+Q\",\n          click: () => {\n            app.quit();\n          },\n        },\n      ],\n    },\n    {\n      label: \"Editar\",\n      submenu: [\n        { label: \"Desfazer\", accelerator: \"CmdOrCtrl+Z\", role: \"undo\" },\n        { label: \"Refazer\", accelerator: \"CmdOrCtrl+Y\", role: \"redo\" },\n        { type: \"separator\" },\n        { label: \"Cortar\", accelerator: \"CmdOrCtrl+X\", role: \"cut\" },\n        { label: \"Copiar\", accelerator: \"CmdOrCtrl+C\", role: \"copy\" },\n        { label: \"Colar\", accelerator: \"CmdOrCtrl+V\", role: \"paste\" },\n      ],\n    },\n    {\n      label: \"Exibir\",\n      submenu: [\n        { label: \"Recarregar\", accelerator: \"CmdOrCtrl+R\", role: \"reload\" },\n        {\n          label: \"Ferramentas de Desenvolvimento\",\n          accelerator: \"F12\",\n          click: () => {\n            if (mainWindow) {\n              mainWindow.webContents.toggleDevTools();\n            }\n          },\n        },\n      ],\n    },\n    {\n      label: \"Ajuda\",\n      submenu: [\n        {\n          label: \"Sobre\",\n          click: () => {\n            dialog.showMessageBox(mainWindow!, {\n              type: \"info\",\n              title: \"Sobre Game Launcher\",\n              message: \"Game Launcher - Bonk.io & Haxball\",\n              detail:\n                \"Versão 1.0.0\\n\\nUm launcher profissional para seus jogos favoritos.\",\n            });\n          },\n        },\n      ],\n    },\n  ];\n\n  const menu = Menu.buildFromTemplate(template);\n  Menu.setApplicationMenu(menu);\n}\n\n/**\n * Abre um jogo em um BrowserView\n */\nfunction openGame(gameUrl: string, gameName: \"bonk\" | \"haxball\") {\n  if (!mainWindow) return;\n\n  // Destruir view anterior se existir\n  if (currentGameView) {\n    mainWindow.removeBrowserView(currentGameView);\n  }\n\n  // Criar novo BrowserView\n  currentGameView = new BrowserView({\n    webPreferences: {\n      preload: PRELOAD_PATH,\n      contextIsolation: true,\n      nodeIntegration: false,\n      sandbox: true,\n      webSecurity: true,\n    },\n  });\n\n  mainWindow.addBrowserView(currentGameView);\n\n  // Configurar bounds do BrowserView para ocupar toda a janela\n  const { width, height } = mainWindow.getContentBounds();\n  currentGameView.setBounds({ x: 0, y: 0, width, height });\n\n  // Carregar o jogo\n  currentGameView.webContents.loadURL(gameUrl);\n  currentGame = gameName;\n\n  // Injetar o script de UI quando o jogo carregar\n  currentGameView.webContents.on(\"did-finish-load\", () => {\n    injectGameUI(gameName);\n  });\n\n  // Redimensionar BrowserView quando a janela for redimensionada\n  mainWindow.on(\"resize\", () => {\n    if (currentGameView && mainWindow) {\n      const { width, height } = mainWindow.getContentBounds();\n      currentGameView.setBounds({ x: 0, y: 0, width, height });\n    }\n  });\n}\n\n/**\n * Injeta a UI do modal no jogo\n */\nfunction injectGameUI(gameName: \"bonk\" | \"haxball\") {\n  if (!currentGameView) return;\n\n  // Ler o arquivo de injeção\n  const injectorPath = isDev\n  ? path.join(process.cwd(), \"electron/injector/injector.js\")\n  : path.join(__dirname, \"injector/injector.js\");\n  const fs = require(\"fs\");\n\n  try {\n    const injectorCode = fs.readFileSync(injectorPath, \"utf-8\");\n    currentGameView.webContents.executeJavaScript(injectorCode);\n  } catch (error) {\n    console.error(\"Erro ao injetar UI:\", error);\n  }\n}\n\n/**\n * Listeners IPC\n */\nipcMain.handle(\"open-game\", async (event, gameName: \"bonk\" | \"haxball\") => {\n  const gameUrls = {\n    bonk: \"https://bonk.io\",\n    haxball: \"https://haxball.com\",\n  };\n  \n  openGame(gameUrls[gameName], gameName);\n  return { success: true };\n});\n\nipcMain.handle(\"close-game\", async () => {\n  if (currentGameView && mainWindow) {\n    mainWindow.removeBrowserView(currentGameView);\n    currentGameView = null;\n    currentGame = null;\n  }\n  return { success: true };\n});\n\nipcMain.handle(\"get-current-game\", async () => {\n  return { game: currentGame };\n});\n\nipcMain.handle(\"check-for-updates\", async () => {\n  try {\n    const result = await autoUpdater.checkForUpdates();\n    return { hasUpdate: result?.updateInfo?.version !== app.getVersion() };\n  } catch (error) {\n    console.error(\"Erro ao verificar atualizações:\", error);\n    return { hasUpdate: false };\n  }\n});\n\nipcMain.handle(\"get-app-version\", async () => {\n  return { version: app.getVersion() };\n});\n\n\n/**\n * Eventos do app\n */\napp.on(\"ready\", createWindow);\n\napp.on(\"window-all-closed\", () => {\n  if (process.platform !== \"darwin\") {\n    app.quit();\n  }\n});\n\napp.on(\"activate\", () => {\n  if (mainWindow === null) {\n    createWindow();\n  }\n});\n\n// Tratamento global de erro\nprocess.on(\"uncaughtException\", error => {\n  console.error(\"Erro não capturado:\", error);\n});"],"names":["__filename","fileURLToPath","__dirname","BrowserWindow","app","dialog","Menu","BrowserView","width","height","ipcMain"],"mappings":"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","x_google_ignoreList":[0]}